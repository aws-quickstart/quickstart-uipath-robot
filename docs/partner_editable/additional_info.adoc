// Add steps as necessary for accessing the software, post-configuration, and testing. Donâ€™t include full usage instructions for your software, but add links to your product documentation for that information.
//Should any sections not be applicable, remove them

== Test the deployment
// If steps are required to test the deployment, add them here. If not, remove the heading
If you provided an Orchestrator URL, log in to Orchestrator, and ensure that the Robot is present and connected to the tenant.
:xrefstyle: short
[#test1]
.Test the deployment
image::../images/test1.png[test1,width=100%,height=100%]

[NOTE]
====
The deployment creates a *MODERN* folder called *AWSDeployed*, which contains the UiPath Robot.

Depending on the type of Robot you selected, you will encounter the following situations:

* For Unattended Robot, the *STATUS* is *N/A*, but you will be able to run jobs on the machine. This happens because the new local administrator account created by the deployment is not logged in to the machine. 
* For Attended Robot, the *STATUS* is *DISCONNECTED* because the built-in administrator account is not logged into the machine.
====

Access the Robot VM from the bastion host to check that the Robot was deployed successfully. 
[NOTE]
==== 
For Attended Robot, connect to it through the administrator account. To retrieve the password for the AWS portal, use your private key, mentioned in the deployment.

For Unattended Robot, retrieve the user account from the Robots page in Orchestrator. The user format is `domain/username` or `machinename/username`. Use the same password that you set in the configuration step.
====

The result should like like <<test2>>

:xrefstyle: short
[#test2]
.Test the deployment
image::../images/test2.png[test2,width=100%,height=100%]

// == Post-deployment steps
// If post-deployment steps are required, add them here. If not, remove the heading

== Best practices for using {partner-product-short-name} on AWS
// Provide post-deployment best practices for using the technology on AWS, including considerations such as migrating data, backups, ensuring high performance, high availability, etc. Link to software documentation for detailed information.

=== High availability and disaster recovery
This Quick Start's architecture supports AWS best practices for high availability and security, and Amazon EC2 provides the ability to run instances in multiple Regions and Availability Zones. Regions are dispersed across geographic areas, and Availability Zones are distinct locations within a Region that are not only isolated from failures in other Availability Zones but also provide inexpensive, low-latency network connectivity to other Availability Zones in the same Region.

By launching instances in separate Regions, you can design your application to be pysically closer to customers or to meet legal and other requirements. By launching your instances in separate Availability Zones, your application is protected from localized failures. Exchange
//TODO Microsft Exchange?
provides infrastructure features that complement the high-availability and disaster-recovery scenarios supported by the AWS Cloud.

This Quick Start also provides an option to deploy Robot in at least two Availability Zones, which can mitigate a loss of quorum if a failure occurs on a single node. This option, however, is available only in AWS Regions that include two or more Availability Zones. For more information, see https://aws.amazon.com/about-aws/global-infrastructure/[Global Infrastructure^].

We recommend that you use the https://docs.uipath.com/[UiPath Documentation Portal^] to customize some of the steps described in this guide or add deployment steps that best meet your business, IT, and security requirements.


== Security
// Provide post-deployment best practices for using the technology on AWS, including considerations such as migrating data, backups, ensuring high performance, high availability, etc. Link to software documentation for detailed information.

When Amazon EC2 instances launch, they must be associated with a security group, which acts as a stateful firewall. You control the network traffic that enters and leaves the security group, so you can build granular rules that are scoped by protocol, port number, and source or destination IP address or subnet. By default, the security group permits all outbound traffic. Inboud traffic, however, must be configured in order to reach your instances.

We recommend that you tightly control inbound traffic. This reduces the attack surface of Amazon EC2 instances but allows the following ports to communicate:

Robot

:xrefstyle: short
[#security1]
.Test the deployment
image::../images/security1.png[security1,width=50%,height=50%]

[cols="20,80",grid="rows",frame="topbot" caption=]
.Robot Ports
|===
|3389
|RDP access

|443
|communication with Orchestrator
|===

For more information, see UiPath's https://docs.uipath.com/orchestrator/docs/security-best-practices[Security Best Practices^]. 

== Other useful information
//Provide any other information of interest to users, especially focusing on areas where AWS or cloud usage differs from on-premises usage.

AWS provides a set of building blocks (for example, Amazon EC2 and Amazon VPC) that you can use to provision your application's infrastructure. In this model, some security capabilities, such as physical security, are the responsibility of AWS and are highlighted in the 
//TODO Insert a link to the whitepaper.
AWS security whitepaper. Other areas, such as controlling access to an application, are either the responsibilty of the application developer or are dependent on the tools provided by Microsoft or Linux.

This Quick Start configures the following security groups for the UiPath stack:

[cols="25,25,25,25",grid="rows",frame="topbot", options="header"]
|===
|Security group
|Associated with
|Inbound source
|Ports

|StackName-SecurityStack-RobotSecurityGroup
|Robots
|0.0.0.0/0
|Inbound: 443, 3389 +
Outbound: any ports
|===

== Create a key pair

. To log in to your instances, you must create a https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html[key pair^] in your preferred Region. In the navigation pane of the Amazon EC2 console, choose *Key Pairs* and then *Create Key Pair*. Enter a name, and then choose *Create.*

Amazon EC2 uses public-key cryptography to encrypt and decrypt login information. In Windows instances, the key pair obtains the administrator password via the Amazon EC2 console and then logs in using Remote Desktop Protocol (RDP). On Linux, the key pair authenticates the SSH (Secure Shell) login. For more information, see https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#prepare-key-pair[Create or import a key pair^].

:xrefstyle: short
[#ds1]
.Create a key pair
image::../images/ds1.png[ds1,width=100%,height=100%]

== Create an IAM user

To launch the stack, your login must have programmatic access to the following AWS services:

[lowerroman]
. AWS CloudFormation
. AWS IAM, Amazon EC2
. Amazon S3
. AWS Lambda
. AWS Storage Gateway.

If you already have an IAM user with full access to AWS services, skip this step.

. If you do not have an adequate IAM user, create one in the AWS console. In the following example, we create `cfnuser` to provide programmatic access and console access.
+
:xrefstyle: short
[#ds2]
.Create an IAM user
image::../images/ds2.png[ds2,width=100%,height=100%]
+
. To follow AWS best practices, allow access to the required services by attaching existing policies. Enter the first few letters of each service name, and choose the *FullAccess* role from the filtered list. The following example shows the screen for adding *AmazonEC2FullAccess*.  
+
:xrefstyle: short
[#ds3]
.Create an IAM user
image::../images/ds3.png[ds3,width=100%,height=100%]
+
Repeat this step for all of the necessary services, and choose *Next*.
+
. (Optional) Choose *Tags*, and add a tag to identify the user.
+  
:xrefstyle: short
[#ds4]
.Create an IAM user
image::../images/ds4.png[ds4,width=100%,height=100%]
+
. Choose *Next*. Review the list to ensure that full access to all AWS services are granted to the user.  
+
:xrefstyle: short
[#ds5]
.Create an IAM user
image::../images/ds5.png[ds5,width=100%,height=100%]
+
. Choose *Create User*, and download the credentials as a `.csv` file. Store it in a secure location for future reference if necessary.
+
:xrefstyle: short
[#ds6]
.Create an IAM user
image::../images/ds6.png[ds6,width=100%,height=100%]
